\subsubsection*{Конструкции Кантора}

\begin{reminder}
	$G = \bscup_{n = 1}^\infty \bscup_{k = 1}^{2^{n - 1}} I_k^n$ --- дополнение \textit{канторова множества}, где $I_k^n$ --- это интервал следующего вида:
	\[
	I_k^n = \ps{\frac{k - 1}{3^{n - 1}} + \frac{1}{3^n}; \frac{k}{3^{n - 1}} - \frac{1}{3^n}}
	\]
	Множество $P = [0; 1] \bs G$ называется \textit{множеством Кантора}. Про эту пару известны следующие свойства:
	\begin{enumerate}
		\item $P = \bigcap_{n = 1}^\infty \bscup_{k = 1}^{2^n} \I_k^n$, где $\I$ --- соответствующий отрезок на $n$-й итерации построения
		
		\item $G$ --- открытое множество, $P$ --- замкнутое
		
		\item $P$ нигде не плотно (то есть для любого интервала найдётся подинтервал, не содержащий элементы $P$)
		
		\item $P$ континуально. Существует биекция в последовательности $\{0, 1\}^\infty$
		
		\item $\lambda(P) = 0$
	\end{enumerate}
\end{reminder}

\begin{reminder}
	Обозначим за $T$ --- множество концов всех интервалов $\I_k^n$. Зададим функцию $\ol{\phi}(x)$ индуктивно (основа \textit{лестницы Кантора})
	\begin{align*}
		&{n = 0, \quad \ol{\phi}(0) = 0,\ \ol{\phi}(1) = 1;}
		\\
		&{n = 1, \quad \ol{\phi}(1 / 3) = \ol\phi(2 / 3) = \frac{0 + 1}{2} = 1 / 2}
		\\
		&{\vdots}
		\\
		&{n, \quad \I_k^{n - 1} = [a; b] \Ra \I_{2k - 1}^n \sqcup \I_{2k}^n = [a; c] \sqcup [d; b] \Ra \ol{\phi}(c) = \ol{\phi}(d) = \frac{1}{2}(\ol{\phi}(a) + \ol{\phi}(b))}
	\end{align*}
	Данная функция по построению обладает следующими свойствами:
	\begin{enumerate}
		\item $\ol{\phi}$ неубывает
		
		\item $\ol{\phi}$ принимает все значения вида $k / 2^n$ для $\forall n \in \N_0,\ k \in \range{0}{2^n}$
	\end{enumerate}
\end{reminder}

\begin{reminder}
	По основе строится сама \textit{Лестница Кантора}:
	\[
		\forall x \in [0; 1]\ \ \phi(x) = \sup_{t \in [0; x] \cap T} \ol{\phi}(t)
	\]
	Она уже обладает такими свойствами:
	\begin{enumerate}
		\item $\phi(x)$ неубывает
		
		\item $\phi(x)$ непрерывна на $[0; 1]$
		
		\item $\phi(x) = const$ на всех $I_k^n$
		
		\item $\phi(x) \neq const$ на $[0; 1]$
	\end{enumerate}
\end{reminder}

\begin{lemma} (для непрерывности лестницы Кантора, \textbf{не материал лектора})
	Если $f \colon [0; 1] \to \R$ --- неубывающая на $D \subseteq \R$ ограниченная функция, то любой предел $f(x_0 - 0)$ и $f(x_0 + 0)$, если он имеет смысл (для краевой точки промежутка один из них не имеет, например), для $x_0 \in D$ существует. Более того, имеют место равенства:
	\[
		\lim_{x \to x_0-0} f(x) = \sup_{x < x_0} f(x); \quad \lim_{x \to x_0+0} f(x) = \inf_{x > x_0} f(x)
	\]
\end{lemma}

\begin{proof}
	Рассмотрим предел снизу. Обозначим $L = \sup_{x < x_0} f(x)$ и зафиксируем $\eps > 0$. По определению супремума, $\exists x_\eps \such B - f(x_\eps) < \eps$. Теперь возьмём такое $\delta > 0$, что $x_0 - x_\eps > \delta$. В силу нестрогой монотонности $f$, мы получили следующее утвеждение:
	\[
		\forall \eps > 0\ \exists \delta > 0 \such \forall x, x_0 - x < \delta\ \ B - f(x) < \eps
	\]
	Что по определению и означает односторонний предел.
\end{proof}

\begin{note}
	Стоит прояснить, почему $\phi$ обладает упомянутыми свойствами:
	\begin{enumerate}
		\item $\phi$ получена как композиция неубывающих функций
		
		\item Предположим, что это не так. Тогда есть 2 случая:
		\begin{enumerate}
			\item $\centernot\exists \lim_{x \to x_0} f(x)$ --- такое может быть только в случае разрыва первого рода, то есть односторонние пределы существуют, но не равны друг другу. Коль скоро это так, наша функция не принимает значения из интервала $(\phi(x_0 - 0); \phi(x_0 + 0))$, что противоречит с всюду плотностью на $[0; 1]$ множества значений.
			
			\item $\exists \lim_{x \to x_0} f(x) \neq f(x_0)$ Такая ситуация нарушает нестрогую монотонность функции, так как хотя бы один из односторонних пределов должен быть по другую сторону от предельного значения.
		\end{enumerate}
		
		\item В дополнении множества Кантора нету краевых точек, на которых строилась $\ol{\phi}$ (невероятно). Посему <<скачков>> у супремума не будет, ибо никаких дополнительных точек не захватилось.
		
		\item $\phi(0) = 0,\ \phi(1) = 1$
	\end{enumerate}
\end{note}

\begin{theorem}
	Существует непрерывная биективная функция $f \colon [0; 1] \to [0; 1]$ такая, что есть ещё следующие свойства:
	\begin{enumerate}
		\item $f$ измерима на $[0; 1]$ по классической мере Лебега
		
		\item Существует $g \colon [0; 1] \to [0; 1]$ --- измеримая по классической мере Лебега функция такая, что
		\begin{enumerate}
			\item $g(f(x))$ не измерима на $[0; 1]$
			
			\item $\exists E \in M_\mu$ такое, что $f^{-1}(E) \notin M_\mu$
		\end{enumerate}
	\end{enumerate}
\end{theorem}

\begin{note}
	Своим последним свойством $f$ отвечает на вопрос: <<Верно ли, что борелевская сигма-алгебра на $[0; 1]$ является множеством всех измеримых по Лебегу множеств и только их?>>.
	
	Мы знаем следующий факт: для любой функции $s \colon X \to \R$, измеримой на $X$, и любого борелевского множества $E$ верно, что $s^{-1}(E) \in X$. Причём каждое борелевское множество измеримо по Лебегу, а теорема утверждает, что есть измеримая функция и измеримое по Лебегу множество, на которых это условие рушится, то есть $\B \subset M_\mu$ --- строгое вложение.
\end{note}

\begin{proof}
	Пусть $\phi$ --- лестница Кантора, $\mu$ --- мера Лебега. Тогда искомая функция --- это $\psi(x) = \frac{1}{2}(x + \phi(x))$. Посмотрим, какими свойствами она обладает:
	\begin{enumerate}
		\item $\psi \colon [0; 1] \to [0; 1]$ --- биекция
		
		\item $\psi$ непрерывна в силу арифметических свойств непрерывных функций
		
		\item $\psi$ строго возрастает в силу свойства сложения строго и нестрого возрастающих функций
		
		\item $\mu(\psi(I_k^n)) = \frac{1}{2}\mu(I_k^n)$, потому что $\phi(I_k^n)$ --- константа и не влияет (переходит в точку), а образ $x$ уменьшается ровно в половину
	\end{enumerate}
	Как следствие последнего свойства, $\mu(\psi(G)) = \mu(\psi(P)) = 1 / 2$, где $G \bscup P = [0; 1]$ --- дополнение множества Кантора и оно само. Коль скоро $\psi(P)$ --- множество конечной меры, то
	\[
		\exists Q \subset \psi(P) \such Q \notin M_\mu \text{ --- неизмеримое по Лебегу}
	\]
	Искомая $f$ --- это просто $\psi^{-1}$. Отсюда $E = \psi^{-1}(Q) = f(Q) \subseteq P$. Это действительно именно то, что мы искали, ибо $\mu(P) = 0$ и мера Лебега полна, то есть $\mu(E) = 0$.
	
	За искомую $g$ надо положить индикатор $\chi_E$.
\end{proof}

\begin{note}
	Мера Бореля неполна. Действительно, $P$ --- борелевское, как дополнение к открытому. При этом $E \subset P$, но оно не борелевское.
\end{note}

\subsection{Сходимость измеримых функций}

\begin{note}
	В этой главе мы фиксируем $(X, M, \mu)$ --- измеримое $\sigma$-конечное пространство и $\{f_n\}_{n = 1}^\infty$, $f$ --- измеримые и конечные на $X$ функции.
\end{note}

\begin{definition}
	Последовательность функций $f_n$ \textit{сходится по мере $\mu$ к} $f$, если выполнено условие:
	\[
		\forall \eps > 0\ \ \mu\{x \in X \colon |f_n(x) - f(x)| > \eps\} \xrightarrow[n \to \infty]{} 0
	\]
	Обозначается как $f_n \Ra^\mu f$
\end{definition}

\begin{definition}
	Последовательность функция $f_n$ \textit{сходится почти всюду к} $f$, если выполнено условие:
	\[
		\mu\{x \in X \colon f_n(x) \centernot\to f(x)\} = 0
	\]
	Обозначается как $f_n \to f$
\end{definition}

\begin{note}
	Последнее определение требует проверки корректности: <<А почему рассматриваемое множество измеримо?>> Мы уже устанавливали факт, что $g = \lim_{n \to \infty} f_n$ является измеримой функцией. Однако, совершенно не факт, что $\Dom g = X$. Тем не менее, мы уже можем что-то сказать про часть того множества, что написано выше:
	\[
		\{x \in \Dom g \colon g(x) \neq f(x)\} \in M
	\]
	Остаётся лишь показать, что $\Dom g \in M$, а это уже делалось в следствии теоремы \ref{limtheorema}
\end{note}

\begin{lemma}
	Пусть $g = \lim_{n \to \infty} f_n$ --- измеримая функция. Тогда
	\[
		X \bs \Dom g = \bigcup_{m = 1}^\infty \bigcap_{n = 1}^\infty \bigcup_{k = n}^\infty \underbrace{\set{x \in X \colon |f_k(x) - f(x)| > \frac{1}{m}}}_{F_{k, m}}
	\]
\end{lemma}

\begin{proof}
	<<Смотри>>
	
	Что значит, что $x \in X \bs E$? Это верно тогда и только тогда, что $f_n(x) \centernot f(x)$. Это эквивалентно тому, что
	\[
		\exists m_0 \in \N \such \forall n \in \N\ \exists k \ge n \such |f_k(x) - f(x)| > \frac{1}{m_0}
	\]
\end{proof}

\begin{theorem} (Критерий сходимости почти всюду в конечно измеримых пространствах)
	Если $\mu(X) < \infty$, то имеет место следующая эквивалентность:
	\[
		f_n \to f \Longleftrightarrow \forall \eps >0\ \lim_{n \to \infty} \ps{\bigcup_{k = n}^\infty \{x \in X \colon |f_k(x) - f(x)| > \eps\}} = 0
	\]
\end{theorem}

\begin{proof}
	То, что мы хотим, по сути эквивалентно следующему:
	\[
		\mu\ps{\bigcup_{m = 1}^\infty \bigcap_{n = 1}^\infty \bigcup_{k = n}^\infty F_{k, m}} = 0
	\]
	Это возможно тогда и только тогда, когда
	\[
		\forall m \in \N\ \ \mu\ps{\bigcap_{n = 1}^\infty \bigcup_{k = n}^\infty F_{k, m}} = 0
	\]
	Пересечение по всевозможным натуральным $n$ соблазнительно напоминает предел множеств (чем и является). Коль скоро $\mu(X) < \infty$, имеет место непрерывность меры, то есть
	\[
		\forall m \in \N\ \ \mu\ps{\bigcap_{n = 1}^\infty \bigcup_{k = n}^\infty F_{k, m}} = \lim_{n \to \infty} \mu\ps{\bigcup_{k = n}^\infty F_{k, m}} = 0
	\]
	Последнего равенства достаточно для теоремы.
\end{proof}

\begin{corollary}
	Если $\mu(X) < \infty$, то из сходимости почти всюду следует сходимость по мере.
\end{corollary}

\begin{note}
	Если же $X = \R$, у которого $\mu(X) = \infty$, а меру взять обычную классическую лебегову, то контрпример выглядит так:
	\[
		f_n(x) = \chi_{[-n; n]}(x)
	\]
	Действительно, $f_n \to 1$ почти всюду, но при этом
	\[
		\mu\set{x \in X \colon |f_n(x) - 1| > \frac{1}{2}} = +\infty
	\]
\end{note}

\begin{theorem} (Пример Рисса)
	Существует $\{f_n\}_{n = 1}^\infty$ такая, что $f_n \Ra f$ и $f_n \centernot\to f$ почти всюду.
\end{theorem}

\begin{proof}
	Рассмотрим $X = [0; 1]$, $M = M_\mu$, $\mu$ --- классическая мера Лебега. Посмотрим вот такую интересную последовательность:
	\[
		\forall n \in \N\ \forall 0 \le k < n\ \ \phi_{n, k}(x) = \chi_{\sbr{k / 2^n; (k + 1) / 2^n}}(x)
	\]
	
	\textcolor{red}{Сюда было бы здорово нарисовать картинку с $n = 0$ и $n = 1$ со всеми $k$.}
	
	При помощи $\phi_{n, k}$ можно задать искомую последовательность $\{f_m\}_{m = 1}^\infty$, ибо
	\[
		\forall m \in \N\ \exists! n \in \N, 0 \le k < n \such m = k + 2^n
	\]
	По сути, $\forall x \in [0; 1]\ \ f_m(x)$ принимает значения 0 и 1 бесконечное число раз. Отсюда сразу следует, что $f_m$ не сходится ни к какой функции в любом $x$. При этом
	\[
		\forall \eps \in (0; 1)\ \ \mu\{x \in X \colon |f_m(x) - 0| > \eps\} = \frac{1}{2^n} \xrightarrow[m \to \infty]{} 0
	\]
	то есть присутствует сходимость по мере к нулю (в равенстве именно $n$ из разложения $n$, а также из $m \to \infty$ следует $n \to \infty$)
\end{proof}

\begin{theorem} (Рисса)
	Пусть $(X, M, \mu)$ --- произвольное $\sigma$-конечное пространство. Тогда, если $f_n \Ra f$, то
	\[
		\exists \{n_k\}_{k = 1}^\infty \such f_{n_k} \to f \text{ почти всюду}
	\]
\end{theorem}

\begin{proof}
	Придётся разобрать случаи с мерой $X$:
	\begin{itemize}
		\item $\mu(X) < \infty$ Тогда из сходимости по мере следует, что
		\[
			\forall k \in \N\ \ \mu\set{x \in X \colon |f_n(x) - f(x)| > \frac{1}{k}} \xrightarrow[n \to \infty]{} 0
		\]
		Отсюда вытягиваем такое утверждение:
		\[
			\forall k \in \N\ \exists n_k \in \N \such n_k > n_{k - 1} \wedge \mu\set{x \in X \colon |f_{n_k} - f(x)| > \frac{1}{k}} < \frac{1}{2^k}
		\]
		Теперь наша стратегия состоит в том, чтобы воспользоваться критерием сходимости. Зафиксируем $\eps > 0$, тогда для любого $\delta > 0$ верно, что
		\[
			\exists m_0 \in \N \such \frac{1}{m_0} < \eps \wedge \frac{1}{2^{m_0 - 1}} < \delta
		\]
		Оценим меру объединения из критерия:
		\[
			\mu\ps{\bigcup_{k = m_0}^\infty \{x \in X \colon |f_{n_k} - f(x)| > \eps\}} \le \sum_{k = m_0}^\infty \frac{1}{2^k} = \frac{1}{2^{m_0 - 1}} < \delta
		\]
		При стремлении $\delta \to 0$ получим ноль и соответствующий предел мер.
		
		\item $\mu(X) = \infty$ По $\sigma$-конечности пространства, $X = \bscup_{k = 1}^\infty B_k$, где $\mu(B_k) < \infty$. Теперь, будем итеративно находить подпоследовательности. $n(1) = \{n_k\}_{k = 1}^\infty$ ---  подпоследовательность, при которой $f_{n(1)_k} \to f$ сходится почти всюду на $B_1$. Понятно, что сходимость по мере никуда не делась, а потому мы можем определить $n(2) \subseteq n(1)$ --- подпоследовательность, на которой $f_{n(2)_k} \to f$ сходится почти всюду на $B_2$ (и на $B_1$ как подпоследовательность $n(1)$). Аналогично определяется $n(t)$ для любого $t > 2$. Посмотрим на следующую последовательность:
		\[
			g_k(x) = f_{n(k)_k}(x)
		\]
		Так как $\forall x \in X\ \exists k \in \N \such x \in B_k$, то $g_k \to f$ почти всюду на $X$.
	\end{itemize}
\end{proof}
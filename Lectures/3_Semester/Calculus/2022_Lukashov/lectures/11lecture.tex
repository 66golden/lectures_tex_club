\begin{note}
	В теории функций одного переменного мы доказали замечательный результат, формулу Ньютона-Лейбница:
	\[
		\int_{[a; b]} F'(x)dx = F(b) - F(a)
	\]
	Неспроста подинтегральная функция написана в таком виде, ведь $dF(x) = F'(x)dx$, и это равенство можно интерпретировать как дифференциальную форму. Следующая часть текущего параграфа будет направлена на доказательство \textit{теоремы Стокса-Пуанкаре}, заявляющаяя в нашем случае такое равенство:
	\[
		\int_{[a; b]} dF = \int_{\vdelta([a; b])} F
	\]
\end{note}

\begin{definition}
	\textit{Цепью $k$-мерных кубов} называется формальная целочисленная комбинация $\sum_{i = 1}^N \alpha_i K_i$, где $\alpha_i \in \Z$, а $K_i$ --- соответствующий $k$-мерный куб в $\R^n$, $n \ge k$.
\end{definition}

\begin{anote}
	Формальность подразумевает, что это ни в коем случае не сумма множеств, а скорее просто кортеж.
\end{anote}

\begin{note}
	Грань $n$-мерного куба является просто $(n - 1)$-мерным кубом, живущим в гиперплоскости $\{x \in \R^n \colon x^j = \alpha\}$. Поэтому мы будем говорить, что каждой грани $K_\alpha^j$ соответствует свой экземпляр подпространства $E_j = \{x \in \R^n \colon x^j = 0\}$.
\end{note}

\begin{anote}
	Задать ориентацию для какой-то области $U \subset \R^n$ означает задать ориентацию на всём пространстве. Открытый куб --- тоже область.
\end{anote}

\begin{definition} (Правило ориентации)
	\begin{enumerate}
		\item Чтобы задать ориентацию для стандартного открытого куба $K$:
		\[
			K = \{x \in \R^n \colon \forall i \in \range{1}{n}\ 0 < x^i < 1\}
		\]
		будем считать $e_0$ положительным базисом (как это и было раньше).
		
		\item Рассматривая грань $K_\alpha^j$ со своим экземпляром $E_j$, зададим на этом подпространстве положительный ортонормированный базис. Выбор этого базиса произведём так, чтобы он был перестановкой векторов из $e_0 \bs \{e_j\}$ и если его кортеж дополнить слева выходящей из куба $K$ нормалью к $K_\alpha^j$, то получится положительно ориентированный базис в $\R^n$.
	\end{enumerate}
\end{definition}

\begin{anote}
	В случае произвольного куба нам нужен некоторый базис $e_0$, где каждый вектор является каким-то ориентированным ребром.
\end{anote}

\begin{anote}
	Если бы мы не обращали внимание на правило, а взяли для грани $K_\alpha^j$ базис $e_0$ без вектора $e_j^0$ (подразумевается не сама грань, естественно, а её экземпляр $E_j$), то в грани (в соответствующем $E_j$) была бы определена своя форма ориентированного объёма $V^j$:
	\[
		V^j = dx^1 \wedge \ldots \wedge dx^{j - 1} \wedge dx^{j + 1} \wedge \ldots \wedge dx^n
	\]
	Эту форму в такой записи можно понимать как форму в подпространстве, соответствующем грани $K_\alpha^j$, так и в $\R^n$.
\end{anote}

\textcolor{red}{Здесь надо картинку с кубом в трёхмерном пространстве}

\begin{proposition}
	Обозначим за $V_\alpha^j$ форму ориентированного объёма для грани $K_\alpha^j$. Тогда её можно записать следующим образом:
	\[
		V_\alpha^j = (-1)^{\alpha + j} dx^1 \wedge \ldots \wedge dx^{j - 1} \wedge dx^{j + 1} \wedge \ldots \wedge dx^n
	\]
\end{proposition}

\begin{proof}
	В силу того, как мы выбирали базис в грани $K_\alpha^j$, должно быть очевидным следующее равенство:
	\[
		V_\alpha^j = \eps_\alpha^j V^j,\ \eps_\alpha^j = \pm 1
	\]
	Заметим, что выходящей из куба нормалью к грани $K_\alpha^j$ можно всегда брать вектор $(-1)^{1 - \alpha}e_j^0$. Так как новый базис является просто перестановкой $e_0$ и мы знаем, что он положительно ориентирован, то должно быть справедливо равенство:
	\[
		(-1)^{1 - \alpha} dx^j \wedge \eps_\alpha^j V^j = V = dx^1 \wedge \ldots \wedge dx^n
	\]
	Остаётся расписать левую часть так, чтобы она отличалась от правой лишь видом коэффициента:
	\[
		(-1)^{1 - \alpha} \cdot \eps_\alpha^j \cdot (-1)^{j - 1} dx^1 \wedge \ldots \wedge dx^n = dx^1 \wedge \ldots dx^n \Lora (-1)^{-\alpha + j} \cdot \eps_\alpha^j;\ \eps_\alpha^j = (-1)^{-\alpha + j + 2\alpha} = (-1)^{\alpha + j}
	\]
\end{proof}

\begin{definition}
	\textit{Границей (краем) куба} $K$ назовём формальную сумму граней $K_\alpha^j$ с коэффициентами, соответствующими записи их форм ориентированного объёма:
	\[
		\vdelta K = \sum_{i \in \range{1}{n} \over {\alpha \in \{0, 1\}}} (-1)^{\alpha + i} K_\alpha^i
	\]
\end{definition}

\textcolor{red}{Тут нужно продемонстрировать границу $\vdelta([0; 1]) = \{1\} - \{0\}$ в одномерном случае}

\begin{theorem} (Стокса-Пуанкаре для стандартного куба)
	Если $\Omega$ --- гладкая $(n - 1)$-форма, заданная на стандартном кубе $K$, то имеет место формула:
	\[
		\int_K d\Omega = \int_{\vdelta K} \Omega
	\]
	где интеграл по границе куба нужно понимать следующим образом (интеграл по $K_\alpha^i$ нужно понимать как интеграл по $K \cap E_j$ --- некоторое множество в $(n - 1)$-мерном пространстве $E_j$, сопоставленное этой грани):
	\[
		\int_{\vdelta K} \Omega := \sum_{i \in \range{1}{n} \atop {\alpha \in \{0, 1\}}} (-1)^{\alpha + i} \int_{K_\alpha^i} \Omega
	\]
\end{theorem}

\begin{proof}
	Поскольку обе части равенства зависят от $(n - 1)$-формы линейно, то достаточно проверить его для базисных форм с коэффициентами следующего вида:
	\[
		\Omega(x) = f_j(x) dx^1 \wedge \ldots \wedge dx^{j - 1} \wedge dx^{j + 1} \wedge \ldots \wedge dx^n
	\]
	Тогда запишем дифференциал формы:
	\[
		d\Omega(x) = df_j(x)dx^1 \wedge \ldots \wedge dx^{j - 1} \wedge dx^{j + 1} \wedge \ldots \wedge dx^n = (-1)^{j - 1}\pd{f_j}{x_j}(x) \underbrace{dx^1 \wedge \ldots \wedge dx^n}_{V(x)}
	\]
	По определению интеграла от дифференциальной формы мы имеем право записать следующее:
	\[
		\int_K d\Omega = (-1)^{j - 1}\int_K \pd{f_j}{x_j}(x)d\mu(x)
	\]
	По теореме Фубини этот интеграл можно свести к повторному. Тогда:
	\begin{multline*}
		\int_K \pd{f_j}{x_j}(x)d\mu(x) = \int_{E_j \cap K} d\mu(y) \int_{[0; 1]} \pd{f_j}{x_j} (y, x_j) d\mu(x_j) = \int_{E_j \cap K} (f_j(y, 1) - f_j(y, 0))d\mu(y) =
		\\
		\int_{K_1^j} f_j(y, 1)d\mu(y) - \int_{K_0^j} f_j(y, 0)d\mu(y)
	\end{multline*}
	где запись аргументов $(y, x_j)$ неформально, то есть по-хорошему $x_j$ должен быть на $j$-й позиции среди координат $y$. По итогу получили такое равенство:
	\[
		\int_K d\Omega = (-1)^{j - 1}\int_{K_1^j} f_j(y, 1)d\mu(y) + (-1)^j \int_{K_0^j} f_j(y, 0)d\mu(y)
	\]
	А теперь посмотрим на то, что такое интеграл по границе:
	\[
		\int_{\vdelta K} \Omega := \sum_{i \in \range{1}{n} \over {\alpha \in \{0, 1\}}} (-1)^{\alpha + i} \int_{K_\alpha^j} \Omega = (-1)^{j + 1} \int_{K_1^j} f_j(y, 1)d\mu(y) + (-1)^j \int_{K_0^j} f_j(y, 0)d\mu(y) = \int_K d\Omega
	\]
\end{proof}

\subsection{Интегрирование дифференциальных форм на многообразиях}

\begin{note}
	Если не оговорено явно другого, то при разговоре о пространствах $\R^n$, $\R^m$ подразумевается, что $n \ge m$.
\end{note}

\begin{definition}
	\textit{Диффеоморфизмом класса $C^k$} называется отображение $\phi \colon U \to V$, $U \subset \R^m$, $V \subset \R^n$ такое, что оно обладает следующими свойствами:
	\begin{enumerate}
		\item $\phi$ является биекцией
		
		\item $\phi$ непрерывно дифференцируемо на $U$ как минимум $k$ раз
		
		\item Матрица Якоби, соответствующая оператору $\phi$, имеет максимальный ранг в любой точке $U$
	\end{enumerate}
\end{definition}

\begin{definition}
	\textit{Элементарным многообразием (клеткой)} в $\R^n$ назовём образ стандартного куба $K \subset \R^m$ при отображении $\phi$, являющегося диффеоморфизмом класса $C^k$ в некоторой окрестности куба.
	
	При этом $\phi$ называется \textit{параметризацией}, а обратное отображение $\psi := \phi^{-1}$ называется \textit{координатным отображением}.
\end{definition}

\begin{note}
	Клетку, как и любое другое многообразие, принято обозначать через $M$ (от английского слова manifold)
\end{note}

\begin{note}
	Чтобы включить класс диффеоморфизма в наименование клетки, её иногда называют \textit{клеткой класса $C^k$}.
\end{note}

\begin{note}
	Если не обговорено явно, считаем буквы $\phi$ и $\psi$ закреплёнными за соответствующими диффеоморфизмами, а букву $M$ за клеткой.
\end{note}

\textcolor{red}{Здесь должна быть картинка, где двумерный квадратик отображается в трехмерный гладкий платочек}

\begin{note}
	Вообще говоря, дифференциальные формы в каждой точке могут рассматриваться как формы от векторных полей. В связи с этим, мы синтаксически будем придерживаться правила ставить вектор над тем, что связано с аргументом дифформы в точке.
\end{note}

\begin{reminder}
	Формально, производная в ЛНП должна писаться как $\phi'(u)(\vv{h})$, ибо по первому аргументу возвращается функция, но чтобы синтаксически согласовать старые и новые записи, пишут просто $\phi'(u)\vv{h}$.
	
	\textcolor{red}{Переместить к появлению сильной производной.}
\end{reminder}

\begin{definition}
	\textit{Касательным пространством} называется линейное пространство $T(x)$, состоящее из касательных векторов в точке $x$ по всевозможным кривым, лежащим в $M$ и проходящим через $x$.
\end{definition}

\begin{note}
	Если $x = \phi(u)$, то касательное пространство $T(x)$ состоит из векторов вида $\phi'(u)\vv{H}$, $\vv{H} \in \R^m$. Более того, в силу нашего требования на диффеоморфизм иметь максимальный ранг матрицы в любой точке следует, что $\dim T(x) = m$.
\end{note}

\begin{definition}
	Говорят, что \textit{дифференциальная форма задана на клетке $M$}, если она определена в каждой точке $x \in M$ и является в них кососимметричной линейной формой на $T(x)$.
\end{definition}

\begin{definition}
	\textit{Касательным расслоением клетки} $M$ называется множество всех пар $(x, T(x))$.
\end{definition}

\begin{note}
	Существует несколько способов задать дифференциальную форму $\Omega$ на клетке:
	\begin{enumerate}
		\item Сужение
		
		Если $p$-форма $\Omega$ задана в окрестности $M$, то
		\[
			\Omega|_M(x)(\vv{G}_1, \ldots, \vv{G}_p) = \Omega(x)(\vv{G}_1, \ldots, \vv{G}_p),\ \ x \in M, \vv{G}_i \in T(x)
		\]
		
		\item Перенос (замена переменных) формы из параметризуемого куба
		
		Если $p$-форма $\Omega$ задана в окрестности стандартного куба $K$, то
		\[
			\psi^*\Omega(x)(\vv{G}_1, \ldots, \vv{G}_p) = \Omega(\psi(x))(\psi'(x)\vv{G}_1, \ldots, \psi'(x)\vv{G}_p),\ \vv{G}_i \in T(x)
		\]
	\end{enumerate}
\end{note}

\begin{note}
	Аналогичным образом мы можем перенести форму $\Pi$ из клетки $M$ на параметризующий куб $K$:
	\[
		\phi^*\Pi(u)(\vv{H}_1, \ldots, \vv{H}_p) = \Pi(\phi(u))(\phi'(u)\vv{H}_1, \ldots, \phi'(u)\vv{H}_p)
	\]
\end{note}

\begin{reminder}
	Мы опускаем первый аргумент $dx^i$ в силу его бессмысленности.
\end{reminder}

\begin{example}
	Покажем, что $dx^i|_M = \psi^*(d\phi^i)$, где $1 \le i \le n$:
	\[
		dx^i|_M(\vv{G}) = dx^i(\vv{G})
	\]
	где $\vv{G} \in T(x) \subseteq \R^n$. Следовательно, $x = \phi(u)$ и $\exists \vv{H} \in \R^m \colon \vv{G} = \phi'(u)\vv{H}$. Подставим эти выражения вместо исходного вектора:
	\[
		dx^i(\vv{G}) = dx^i(\phi'(u)\vv{H}) = \pd{\phi^i}{u_1}(u)H^1 + \ldots + \pd{\phi^i}{u_m}(u)H^m
	\]
	где $H^i$ --- соответствующая координата вектора $\vv{H}$. Если заменить $H^i$ на значение соответствующей 1-формы, то можно воспринимать $d\phi$ как $1$-форму и переписать это выражение так:
	\[
		\pd{\phi^i}{u_1}(u)du^1(\vv{H}) + \ldots + \pd{\phi^i}{u_m}du^m(\vv{H}) = d\phi(u)(\vv{H}) = d\phi^i(\psi(x))(\psi'(x)\vv{G}) = \psi^*(d\phi^i)(x)(\vv{G})
	\]
\end{example}

\begin{definition}
	Если $\Omega$ - гладкая $p$-форма на клетке $M = \phi(K)$, то \textit{дифференциалом формы на клетке} называется такая форма:
	\[
		d\Omega := \psi^*d(\phi^*\Omega)
	\]
	где $d(\phi^*\Omega)$ является внешним дифференциалом.
\end{definition}

\begin{lemma}
	Определенная операция дифференцирования форм не зависит от параметризации.
\end{lemma}

\begin{proof}
	Пусть $\hat{\phi}(v) = x$ - другая параметризация клетки (аналогично обозначаем всё, что связно с другой параметризацией). Нам необходимо показать следующий факт:
	\[
		\psi^*d(\phi^*\Omega) = d\Omega = \hat{\psi}^*d(\hat{\phi}^*\Omega)
	\]
	Для начала, можем вывести диффеоморфизм куба в себя:
	\[
		\phi(u) = x = \hat{\phi}(v);\ v = \hat{\psi}(\phi(u)) =: \pi(u)
	\]
	Естественно, тот факт, что $\pi$ является диффеоморфизмом, нужно обосновывать, но мы сойдёмся на очевидности. Отсюда же получаем формулу $\phi = \hat{\phi} \circ \pi$. Это значит, что если бы мы хотели сделать перенос $\phi^*\Omega$, то это было бы формой $\pi^*(\hat{\phi}^*(\Omega))$, что неформально записывается как $\phi^* = \pi^* \circ \hat{\phi}^*$. Аналогично получаются следующие формулы:
	\begin{align*}
		&{\psi = \pi^{-1} \circ \hat{\psi}}
		\\
		&{\psi^* = \hat{\psi}^* \circ (\pi^{-1})^*}
	\end{align*}
	Теперь распишем дифференциал через параметризацию $\phi$:
	\[
		d\Omega = \psi^*d(\phi^*\Omega) = (\hat{\psi}^* \circ (\pi^{-1})^*)d((\pi^* \circ \hat{\phi^*})\Omega)
	\]
	Идейно понятно, что применение $\pi^*$, дифференцирования (которое не влияет на вид аргументов) и потом $(\psi^{-1})^*$ эквивалентны просто дифференцированию. Стало быть:
	\[
		d\Omega = \psi^*(\phi^*\Omega) = \hat{\psi}^*d(\hat{\phi}^*\Omega)
	\]
	Что и требовалось доказать.
\end{proof}

\begin{definition}
	\textit{Векторным полем на клетке} называется функция $A(x)$ такая, что $\forall x \in M\ A(x) \in T(x)$
\end{definition}

\begin{definition}
	Набор непрерывных векторных полей $\{e_i(x)\}_{i = 1}^m$ называется \textit{реп\'{е}ром для клетки} $M$, если в каждой точке многообразия этот набор образует базис пространства $T(x)$.
\end{definition}

\begin{definition}
	Пусть задана ориентация во всех касательных пространствах клетки $M$. Тогда, если $x, y \in M$ --- фиксированные произвольные точки, то касательные пространства $T(x)$ и $T(y)$ называются \textit{ориентированными согласованно}, если существует репер $\{e_i\}_{i = 1}^m$ такой, что базисы $\{e_i(x)\}_{i = 1}^m$ и $\{e_i(y)\}_{i = 1}^m$, являющиеся значениями этого репера в указанных точках, положительны в $T(x)$ и $T(y)$ соответственно.
\end{definition}

\begin{proposition}
	Для клетки $M$ класса $C^k$ существует репер.
\end{proposition}

\begin{proof}
	Пусть $\{e_i\}_{i = 1}^m$ --- базис в пространстве $\R^m$. Тогда в любой точке $M \ni x = \phi(u)$ система векторов $\{\phi'(u)e_i\}_{i = 1}^m$ образует базис в $T(x)$. Действительно, для этого достаточно проверить лишь линейную независимость системы, ибо $\dim T(x) = m$. А это следует уже из того факта, что матрица $\phi'(u)$ имеет размерность $m$, то есть $\phi'(u)$ является инъективным отображением. Более подробно можно посмотреть в конспекте Алгебры и Геометрии лектора И.И. Богданова первого семестра 2019 года, страница 68.
\end{proof}

\begin{proposition}
	Все касательные пространства клетки могут быть ориентированы согласованно с помощью какого-либо репера. При этом их ориентация не зависит от выбора репера.
\end{proposition}

\begin{proof}
	Возьмём любой репер $\{e_i\}_{i = 1}^m$ и зададим ориентацию на всех касательных пространствах $T(x)$, $x = \phi(u)$ таким образом, что базис $\{e_i\}_{i = 1}^m$ является положительным.
\end{proof}

\begin{proposition} (от автора)
	Если реперы $\{e_i(x)\}_{i = 1}^m$ и $\{e'_i(x)\}_{i = 1}^m$ ориентированы согласованно хотя бы при одном $x_0 \in M$, то это верно и для любой точки
\end{proposition}

\begin{proof}
	Действительно, так как в любой точке матрица перехода от $e'_i(x)$ к $e_i(x)$ имеет ненулевой определитель, сам он при этом непрерывен, а также в одной из точек положителен, то он положителен при любом $x \in M$.
\end{proof}

\begin{definition} (от автора)
	Клетка называется \textit{ориентированной}, если задана согласованная ориентация всех её касательных пространств.
\end{definition}

\begin{definition} (переформулировано автором)
	Параметризация $\phi$ ориентированной клетки $M$ называется \textit{положительной (отрицательной)}, если репер $\{\phi'(u)e_i\}_{i = 1}^m$ является положительным (отрицательным).
\end{definition}

\begin{definition}
	\textit{Границей (краем) клетки} $M$ называется формальная комбинация $\vdelta M := \sum_{i \in \range{1}{m} \atop {\alpha \in \{0, 1\}}} (-1)^{i + \alpha} M_\alpha^i$, где $M_\alpha^i = \phi(K_\alpha^i)$ для некоторой положительной параметризации $\phi$.
\end{definition}

\begin{note}
	Можно доказать, что такое определение границы клетки не зависит от параметризации. Мы же принимаем это утверждение без доказательства.
\end{note}

\begin{definition}
	\textit{Интегралом от дифференциальной формы} $\Omega$, заданной на клетке $M = \phi(K)$, называется следующий интеграл:
	\[
		\int_M \Omega := \int_K \phi^*\Omega
	\]
\end{definition}

\begin{definition} (от автора)
	\textit{Цепью клеток} называется формальная сумма $\sum_{i = 1}^N \alpha_i M_i$, где $\alpha_i \in \Z$, а все $M_i$ обладают одинаковой размерностью и ориентированы.
\end{definition}

\begin{anote}
	Чуть позже даётся неформальное определение того, что такое размерность многообразия. Конкретно в нашем случае, это будет $m$.
\end{anote}

\begin{theorem} (Стокса-Пуанкаре для клетки)
	Пусть $\Omega$ --- гладкая $(n - 1)$-форма, заданная на ориентированной клетке $M$. Тогда верно равенство:
	\[
		\int_M d\Omega = \int_{\vdelta M} \Omega
	\]
\end{theorem}

\begin{proof}
	Пусть $\phi$ --- параметризация клетки $M$. Тогда
	\[
		\int_M d\Omega = \int_M \psi^* d(\phi^*\Omega) = \int_K \phi^* \psi^* d(\phi^*\Omega) = \int_K d(\phi^*\Omega) = \int_{\vdelta K} \phi^*\Omega = \int_{\vdelta K} \Omega
	\]
\end{proof}
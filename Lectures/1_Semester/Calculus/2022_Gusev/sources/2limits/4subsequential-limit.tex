\subsection{Частичный предел}
\begin{theorem}
    Для непустого множества $A$, ограниченого сверху, 
        \[ \exists (x_n) : \limpinf x_n = \sup{A}, \forall n \in \N\ x_n \in A, x_n \le x_{n + 1}, \]
    где $(x_n)$ -- максимизирующая последовательность.
\end{theorem}
\begin{proof}\phantom\\
    \begin{itemize}
        \item $\sup{A} \in A \thus x_n = \sup{A}$
        \item $\sup{A} \notin A$, тогда $x_1$ возьмём произвольным, остальные элементы будем набирать последовательно. $x_n > \max(x_1, x_2, \ldots, x_{n - 1})$ и $x_n > \sup{A} - n$. Такое $x_n$ почти очевидно (TODO) существует.
    \end{itemize}
\end{proof}

\begin{definition}
    Последовательность $ (x_k) $ называется подпоследовательности последовательности $ (y_n) $,
    если $ \exists  $ строго возрастающая последовательность $ (n_k) $ натуральных чисел такой, что $ x_k = y_{n_k} $
\end{definition}
\begin{example}
    $ y_n = \dfrac{( - 1)^ n}{n}, x_k = \frac{1}{2k} $ -- последовательность $ (y_n) $
\end{example}

\begin{theorem}[Больцано -- Вейерштасса]
    \label{ExistsLimitSubseq}
    Если $ (x_n) $ ограничена, то $ \exists  $ подпоследовательность $ (x_{n_k}) $ имеется конечный предел.
\end{theorem}
\begin{proof}
    \begin{gather}
        b_k - a_k = 2^{ - k}(b - a)
    \end{gather}
    По теореме Кантора $ \exists ! c \in \cap_{n = 1}^\infty [a_n, b_n] $. Выберем $ n: x_{n_1}  \in [a_1, b_1], \dots , n_k : x_{n_k} \in [a_k, b_k]$, причём $ n_k < n_{k + 1} \forall k $.
    Тогда $ \sconstr x_{n_k} - c \sconstr \leq  2^{ - k}(b - a) \to  0 \implies  x_{n_k} \to c $
\end{proof}

\begin{theorem}[Обобщённая теорема Больцано -- Вейерштасса]
    Из любой последовательности $(x_n)$ можно выделить подпоследовательность, у которой существует предел в $\RR$.
    \label{ExistsLimitSubseqExt}
\end{theorem}
\begin{proof}
    Пусть $(x_n)$ неограничена (иначе можно применить \ref{ExistsLimitSubseq}). Не уменьшая общности, будем считать $(x_n)$ неограничена сверху. $\exists (x_{n_k}) : x_{n_k} > k$, так как её можно построить по индукции. База очевидна (так как 1 не является верхней гранью). Переход: рассмотрим $\{ n \sconstr x_n > m + 1 \}$. Это множество бесконечно $\thus$ можно выбрать элемент больший $n_k$. Рекурсивно построили последовательность. По теореме о предельном переходе в неравенстве, $\limpinf x_{n_k} \ge \limpinf k = +\infty$.
\end{proof}

\begin{theorem}
    Из любой последовательности можно выделить монотонную последовательность.
\end{theorem}

\df{Частичный предел последовательности $(x_n)$}{число из $\RR$, которое является пределом подпоследовательности $x_n$.}

\begin{theorem}[Критерий частичного предела]
    $a \in \RR$ -- частичный предел $(x_n)$ согда $\forall \varepsilon > 0$ в $U_\varepsilon(a)$ находится бесконечное число элементов последовательности.
    \label{SublimitCriteria}
\end{theorem}
\begin{proof}
    \iffproofR{
        TODO просто расписать про суффикс
    }{
        Выберем подпоследовательность $(x_{n_k})$ так, что $x_{n_k} \in U_{\frac{1}{k}}(a)$, тогда такая подпоследовательность будет сходиться к $a$. (TODO, рассуждение, аналогичное \ref{ExistsLimitSubseqExt})
    }
\end{proof}

\begin{theorem}
    $\forall (x_n)\ \limpinf x_n = a \in \RR$ согда $ \forall $ подпоследовательности $ (x_{n_k}) $ выполнено $ \limpinf x_{n_k} = a$.
\end{theorem}
\begin{proof}
    \iffproofR{
        $\limpinf x_n = a \thus a$ -- частичный предел. Докажем единственность от противного. Пусть другой предел равен $b$, тогда для $\varepsilon = \sep(a, b)$ весь суффикс попадает в $U_\varepsilon(a) \thus $ в $U_\varepsilon(b)$ находится конечное число элементов последовательности. 
    }{
        Пусть $a$ -- единственный частичный предел последовательности. От противного, последовательность не сходится к $a$, тогда $\exists \varepsilon > 0 : $ вне $U_\varepsilon(a)$ лежит бесконечное число элементов последовательности, тогда по теореме \ref{ExistsLimitSubseqExt} у подпоследовательности, составленной из этих элементов существует частичный предел, который не может быть равен $a$ (по теореме \ref{SublimitCriteria} для $\varepsilon = \varepsilon$) и который также является частичным пределом изначальной последовательности. Противоречие с единственностью. 
    }
\end{proof}

\begin{theorem}
    Пусть $P$ -- множество всех частичных пределов последовательности $(x_n)$, тогда $\sup(P) \in P$, $\inf(P) \in P$.
\end{theorem}
\begin{proof}
    Выберем произвольную $U_\varepsilon(\sup(P))$, тогда в нём лежит хотя бы один частичный предел $(x_n)$ (по свойству верхней грани), возьмём $\delta$ такую, что $\delta$-окрестность значения частичного предела полностью вкладывается в $\varepsilon$-окрестность $\thus$ в $\forall \varepsilon$-окрестности $\sup(P)$ лежит бесконечно много элементов из $x_n \thus$ $\sup(P)$ -- частичный предел.
\end{proof}

\begin{gather}
    \varliminf_{n \to +\infty} x_n \defeq \inf(P) \\
    \varlimsup_{n \to +\infty} x_n \defeq \sup(P)
\end{gather}

\begin{example}
    $x_n = (-1)^n \Rightarrow P = \{-1, 1\}$
\end{example}

\begin{example}[*]
    Множеством частичных пределов $x_n = sin(n)$ является $[-1; 1]$.
\end{example}

\begin{theorem}[$\Q$ всюду плотно в $\R$]
    $\forall x \in R, \varepsilon>0\ \exists q \in \Q \cup U_\varepsilon(x)$
\end{theorem}
\begin{proof}
    Возьмём зернистость $\frac{1}{\varepsilon}$, тогда там будет существовать рациональное число.
\end{proof}

\begin{example}
    Множество частичных пределов биекции $\N \mapsto \Q$ $\RR$.
\end{example}
\begin{proof}
    Пусть $x \in \RR$. Рассуждение аналогичное 
\end{proof}
